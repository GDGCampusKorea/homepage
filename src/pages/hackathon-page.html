<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="../../bower_components/marked-element/marked-element.html">

<link rel="import" href="../behaviors/cascaded-behavior.html">
<link rel="import" href="../behaviors/localize-behavior.html">
<link rel="import" href="../behaviors/page-behavior.html">
<link rel="import" href="../elements/footer-block.html">
<link rel="import" href="../elements/logos-block.html">
<link rel="import" href="../elements/mapdcamp-block.html">


<dom-module id="hackathon-page">
	<template>

		<style include="shared-styles">
	      :host {
	      	 --grid-gutter: 8px;
	      	  --colums-number: 4;
	        display: block;
	      }

			.markdown-html {
			 line-height: 2rem;
			 color: #444;
			}

			.markdown-html h3 {
			 margin: 40px;
			 font-weight: bold;
			 font-size: 2rem;
			 text-align: center;
			 color: #3a6d94 ;
			}

			.markdown-html ul {
			 margin: 0 20px;
			}

	      .details {
	        @apply(--layout-vertical);
	        @apply(--layout-center-justified);
	      }

	      .details-item {
	        @apply(--layout-horizontal);
	        margin: 0 auto;
	        padding-bottom: 32px;
	      }

	      .team-container {
	        @apply(--layout-vertical);
	        @apply(--layout-wrap);
	      }

	      .team-block {
	        margin-bottom: 30px;
	      }

	      .team-name {
	        text-align: center;
	      }
		.schedule__block {
		    display: block;
		    text-align: left;
		    width: 100%;
		}

	      .schedule__cell--time--long {
    			width: 150px;
		}

		.schedule__cell--time {
		    font-weight: 600;
		    color: #333;
		    width: 80px;
		}
		  .schedule__cell {
		    display: table-cell;
		    padding: 0px 10px;
		    font-size: 1em;
		    font-weight: 400;
		    width: auto;
		    border-top: solid 1px #ddd;
		}

		.schedule__row {
		    display: table;
		    table-layout: fixed;
		    width: 100%;
		}

	      .member {
	        @apply(--layout-horizontal);
	        width: 100%;
	        margin: var(--grid-gutter) 0;
	      }

	      .card {
	        @apply(--layout-flex);
	        @apply(--layout-vertical);
	        @apply(--shadow-elevation-2dp);
	        padding: 32px 16px;
	        background: #fff;
	      }

	      .card:hover {
	        @apply(--shadow-elevation-3dp);
	        background: #fff;
	      }

	      .header {
	        @apply(--layout-vertical);
	        @apply(--layout-center-center);
	      }

	      .photo {
	        width: 120px;
	        height: 120px;
	        position: relative;
	        border-radius: 50%;
	        overflow: hidden;
	        background: var(--default-primary-color) 50% 50%;
	        background-size: cover;
	      }

	      .card-content {
	        @apply(--layout-vertical);
	        @apply(--layout-flex-auto);
	        color: var(--primary-text-color);
	        font-size: 18px;
	        text-align: center;
	      }

	      .name {
	        font-size: 20px;
	      }

	      .title {
	        font-size: 16px;
	        color: var(--secondary-text-color);
	      }

	      .card-actions {
	        text-align: center;
	      }

	      .social-icon {
	        color: var(--secondary-text-color);
	      }

	      @media (min-width: 601px) {
	        .details-icon {
	          --iron-icon-height: 72px;
	          --iron-icon-width: 72px;
	          margin-right: 32px;
	        }

	        .team-container {
	          @apply(--layout-horizontal);
	          @apply(--layout-center-justified);
	        }

	        .member {
	          width: calc(100% / var(--colums-number) - (var(--colums-number) + 1) * var(--grid-gutter));
	          margin: var(--grid-gutter) var(--grid-gutter) calc(var(--colums-number) * var(--grid-gutter));
	        }

	        .card {
	          background: none;
	          box-shadow: none;
	          transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1), background 0.28s cubic-bezier(0.4, 0, 0.2, 1);
	        }

	        .card:hover {
	          @apply(--shadow-elevation-3dp);
	          background: #fff;
	        }

	        .social-link {
	          display: inline-block;
	          opacity: 0;
	          transform: translate3d(0, 50%, 0);
	          will-change: transform, opacity;
	          transition: transform 0.28s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.28s cubic-bezier(0.4, 0, 0.2, 1);
	        }

	        .card:hover .social-link {
	          opacity: 1;
	          transform: translate3d(0, 0, 0);
	        }

	        .social-link:nth-child(2) {
	          transition-delay: .1s;
	        }

	        .social-link:nth-child(3) {
	          transition-delay: .15s;
	        }

	        .social-link:nth-child(4) {
	          transition-delay: .2s;
	        }

	        .social-link:nth-child(5) {
	          transition-delay: .25s;
	        }
	      }

	      @media (min-width: 1600px) {
	        .container {
	          max-width: 960px;
	        }
	      }
	    </style>

		<iron-ajax auto id="ajax" url="[[source]]" handle-as="text" on-response="updateCascadedNodes" last-response="{{contents}}"></iron-ajax>

		<div class="container">
			<marked-element markdown="[[contents]]">
        		<div class="markdown-html"></div>
      		</marked-element>
      		<template is="dom-repeat" items="[[person]]" as="team">
        	<div class="team-block">
	          <h3 class="team-name" cascaded>[[team.title]]</h3>

	          <div class="team-container">
	            <template is="dom-repeat" items="[[team.members]]" as="member" on-dom-change="updateCascadedNodes">
		              <div class="member">
		                <paper-material class="card"  cascaded>
		                  <div class="header">
		                    <img class="photo" src="[[member.photoUrl]]"/>
		                  </div>
		                  <div class="card-content">
		                    <div class="name">[[member.name]]</div>
		                    <div class="title">[[member.title]]</div>
		                  </div>
		                  <div class="card-actions">
		                    <template is="dom-repeat" items="[[member.socials]]" as="social">
		                      <a class="social-link" href$="[[social.link]]" target="_blank" rel="noopener noreferrer">
		                        <paper-icon-button class="social-icon"
		                                           icon$="icons:{{social.icon}}"></paper-icon-button>
		                      </a>
		                    </template>
		                  </div>
		                </paper-material>
		              </div>
		            </template>
		          </div>
		        </div>
		    </template>
		</div>
		<!-- <featured-people app="{{app}}" people="{{people}}" cascaded></featured-people> -->
		<mapdcamp-block app="{{app}}" selected="{{selected}}" cascaded></mapdcamp-block>
		<logos-block app="{{app}}" logos="{{logos}}" cascaded></logos-block>
		<footer-block app="{{app}}" cascaded></footer-block>
	</template>


	<script>
	    (function () {
	      'use strict';

	      Polymer({

	        is: 'hackathon-page',

	        behaviors: [
	          HOVERBOARD.PageBehavior,
	          HOVERBOARD.CascadedBehavior
	        ],

	        properties: {
	         
	         	source: {
            		type: String,
            		value: 'data/posts/fire-based-hackathon.markdown'
          		},

          		logos :{
          			type:Array,
          			value: [
      					{
						    "title": "장소 후원",
						    "logos": [
						      {
						        "name": "D.Camp",
						        "url": "http://dcamp.kr/",
						        "logoUrl": "../images/logos/dcamp-logo.svg"
						      }
						    ]
						  }
          			]
          		},

          		person :{
          			type: Array,
          			value: [
						{
						    "members": [
						      {
						        "name": "강경완",
						        "photoUrl": "/images/people/kyeongwan.jpg",
						        "companyLogo": "/images/logos/gdg-kc.png",
						        "nick": "@lucas",
						        "title": "",
						        "socials": [
						          {
						            "icon": "facebook",
						            "link": "https://www.facebook.com/kyeongwan.k",
						            "name": "Facebook"
						          },
						          {
						            "icon": "website",
						            "link": "http://kyeongwan.kr/",
						            "name": "Blog"
						          }
						        ]
						      },
						      {
						        "name": "이가은",
						        "photoUrl": "/images/people/lika.jpg",
						        "companyLogo": "/images/logos/gdg-kc.png",
						        "title": ""
						      },
						      {
						        "name": "박혜정",
						        "photoUrl": "/images/people/hyejeong.jpg",
						        "companyLogo": "/images/logos/gdg-kc.png",
						        "title": ""
						      },
						      {
                                "name": "계성혁",
                                "photoUrl": "/images/people/sunghyuk.jpg",
                                "companyLogo": "/images/logos/gdg-kc.png",
                                "nick": "@lkaybob",
                                "socials": [
                                  {
                                    "icon": "facebook",
                                    "link": "https://www.facebook.com/lawrence.kaybob",
                                    "name": "Facebook"
                                  },
                                  {
                                    "icon": "website",
                                    "link": "http://blog.lkaybob.pe.kr/",
                                    "name": "Blog"
                                  }
                                ]
                              },
						      {
                                "name": "진겸",
                                "photoUrl": "/images/people/kevin.jpg",
                                "companyLogo": "/images/logos/gdg-kc.png",
                                "nick": "@kevioriginal",
                                "socials": [
                                  {
                                    "icon": "facebook",
                                    "link": "https://www.facebook.com/profile.php?id=100008548391487",
                                    "name": "Facebook"
                                  },
                                  {
                                    "icon": "website",
                                    "link": "https://kevinoriginal.github.io/",
                                    "name": "Blog"
                                  }
                                ]
                              },
						      {
						        "name": "문연주",
						        "photoUrl": "/images/people/yeonju.jpg",
						        "companyLogo": "/images/logos/gdg-kc.png",
						        "title": ""
						      },
						      {
						        "name": "박효진",
						        "photoUrl": "/images/people/hyojin.jpg",
						        "companyLogo": "/images/logos/gdg-kc.png",
						         "socials": [
                                 {
                                   "icon": "facebook",
                                   "link": "https://www.facebook.com/sleeeepy.zZ",
                                   "name": "Facebook"
                                 }
                               ],
                             	"title": ":D"
						      },
						       {
								    "name": "강명서",
								    "photoUrl": "/images/people/myungseo.jpg",
								    "companyLogo": "/images/logos/gdg-kc.png",
								    "nick": "@Leop0ld",
								    "socials": [
								      {
								        "icon": "facebook",
								        "link": "https://www.facebook.com/leop0ld",
								        "name": "Facebook"
								      },
								      {
								        "icon": "twitter",
								        "link": "https://twitter.com/__leop0ld__",
								        "name": "Twitter"
								      },
								      {
								        "icon": "website",
								        "link": "https://leop0ld.github.io/",
								        "name": "Blog"
								      }
								    ],
								    "title": "Happy Hacker"
								},
						      {
						        "name": "권혁우",
						        "photoUrl": "/images/people/alex.jpg",
						        "companyLogo": "/images/logos/gdg-kc.png",
						        "title": ""
						      }
						    ],
						    "title": "도움 주신 분들"
						  }
          			]
          		}
	        }

	      });

	    }());
 	</script>

</dom-module>